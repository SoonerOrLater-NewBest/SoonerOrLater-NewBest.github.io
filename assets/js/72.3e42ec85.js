(window.webpackJsonp=window.webpackJsonp||[]).push([[72],{646:function(s,t,a){"use strict";a.r(t);var n=a(45),r=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"easymock本地部署，随时mock数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#easymock本地部署，随时mock数据"}},[s._v("#")]),s._v(" "),a("Label",{attrs:{level:1}}),s._v("EasyMock本地部署，随时mock数据")],1),s._v(" "),a("h2",{attrs:{id:"本地搭建"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#本地搭建"}},[s._v("#")]),s._v(" 本地搭建")]),s._v(" "),a("p",[s._v("鉴于在线服务常年登不上，最好自己搭个本地服务，美滋滋")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"http://www.imooc.com/article/267594",target:"_blank",rel:"noopener noreferrer"}},[s._v("Mac本地搭建easy-mock"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://cloud.tencent.com/developer/article/1356684",target:"_blank",rel:"noopener noreferrer"}},[s._v("Win本地搭建easy-mock"),a("OutboundLink")],1)])]),s._v(" "),a("p",[a("strong",[s._v("网上有很多文章，如上贴2篇，照着来，说一下注意点")])]),s._v(" "),a("ul",[a("li",[s._v("8.9 < node 版本 < 10.x")]),s._v(" "),a("li",[s._v("MongoDB不再开源了，所以mac不能直接 brew install mongodb")]),s._v(" "),a("li",[s._v("解决方案->"),a("a",{attrs:{href:"https://github.com/mongodb/homebrew-brew",target:"_blank",rel:"noopener noreferrer"}},[s._v("官网选项"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://blog.csdn.net/weixin_43972437/article/details/100671337",target:"_blank",rel:"noopener noreferrer"}},[s._v("Brew安装MongoDB"),a("OutboundLink")],1)]),s._v(" "),a("li",[s._v("注意修改 config/default.json 配置文件")]),s._v(" "),a("li",[s._v("创建一个数据库存储目录 /data/db")])]),s._v(" "),a("div",{staticClass:"language-c line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-c"}},[a("code",[s._v("sudo mkdir "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("p "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("db\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 如果你的数据库目录不是/data/db，可以通过 --dbpath 来指定。")]),s._v("\nsudo mongod "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("dbpath"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("db\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("ul",[a("li",[s._v("编译源码")])]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 分开执行或用&&连接")]),s._v("\n$ git clone https"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("github"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("easy"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("mock"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("easy"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("mock"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("git\n$ npm i\n$ npm run build\n$ cross"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("env "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NODE_ENV")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("production pm2 start app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h2",{attrs:{id:"服务命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#服务命令"}},[s._v("#")]),s._v(" 服务命令")]),s._v(" "),a("p",[a("strong",[s._v("mongodb")])]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("$ brew services start mongodb"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("community "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 启动")]),s._v("\n$ brew services stop mongodb"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("community "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 停止")]),s._v("\n$ mongod "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("config "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mongod"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("conf "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 手动")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 如果不包括–config选项具有配置文件的路径，则MongoDB服务器没有默认配置文件或日志目录路径，并且将使用 /data/db.")]),s._v("\n$ mongo admin "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("eval "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"db.shutdownServer()"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 关闭")]),s._v("\n$ mongo "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 进入mongo环境")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[a("strong",[s._v("redis")])]),s._v(" "),a("blockquote",[a("p",[s._v("我没设置环境变量或软链接，所以这边就用./运行了，前台起的服务，关闭只需control + c")])]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("redis"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("server 启动redis服务\n$ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("redis"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cli 测试 redis命令\n$ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("redis"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cli "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("raw 避免中文乱码\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 脚本命令")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\t"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("EVAL")]),s._v(" script numkeys key "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("key "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" arg "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("arg "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n执行 Lua 脚本。\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\t"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("EVALSHA")]),s._v(" sha1 numkeys key "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("key "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" arg "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("arg "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n执行 Lua 脚本。\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\t"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SCRIPT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("EXISTS")]),s._v(" script "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("script "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n查看指定的脚本是否已经被保存在缓存当中。\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("\t"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SCRIPT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("FLUSH")]),s._v("\n从脚本缓存中移除所有脚本。\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\t"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SCRIPT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("KILL")]),s._v("\n杀死当前正在运行的 Lua 脚本。\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("\t"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SCRIPT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("LOAD")]),s._v(" script\n将脚本 script 添加到脚本缓存中，但并不立即执行这个脚本。\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("h2",{attrs:{id:"api-自动生成"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#api-自动生成"}},[s._v("#")]),s._v(" API 自动生成")]),s._v(" "),a("p",[a("strong",[s._v("使用"),a("a",{attrs:{href:"https://easy-mock.github.io/easy-mock-cli/#/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Easy-Mokc-ClI"),a("OutboundLink")],1),s._v(" 自动生成api调用文件")])]),s._v(" "),a("ul",[a("li",[s._v("npm install -g easy-mock-cli // 安装")]),s._v(" "),a("li",[s._v("根目录配置文件.easymockrc")])]),s._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"host"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://localhost:7300"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 默认是https://www.easy-mock.com")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"output"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"api"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"template"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"axios"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"projects"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"id"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"你要创建的 Easy Mock 项目的 id"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"demo"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"black"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/query"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 排除 query 接口")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"id"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"58fef6ac5e43ae5dbea5eb51"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"top"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 生成到 api/top 目录下。")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"white"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/proxy"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 只生成 proxy 接口")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br")])]),a("ul",[a("li",[s._v("easymock init . // 生成js文件")])]),s._v(" "),a("h2",{attrs:{id:"遇到的问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#遇到的问题"}},[s._v("#")]),s._v(" 遇到的问题")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://segmentfault.com/a/1190000018618747",target:"_blank",rel:"noopener noreferrer"}},[s._v("Easy-mock中post数据预览"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);t.default=r.exports}}]);